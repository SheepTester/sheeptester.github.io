<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>little sheep hall of fame</title>
    <meta
      name="description"
      content="Dedicated to the little sheep watermark that appears on most pages of this site."
    />
    <meta name="theme-color" content="#4fa1a7" />

    <link rel="stylesheet" type="text/css" href="/sheep3.css" />
    <link rel="stylesheet" type="text/css" href="/reform/v1/index.css" />
    <link rel="stylesheet" type="text/css" href="./sheep-nav.css" />
    <script src="/sheep3.js" charset="utf-8"></script>

    <style>
      .cols figure {
        width: 0;
        flex: auto;
        margin: 0;
      }
      .cols figure img {
        border-radius: 15px;
        border: 1px solid var(--line);
      }

      #pie text {
        text-anchor: middle;
        dominant-baseline: middle;
        fill: currentColor;
        font-size: 10px;
      }
      #pie a:hover text {
        fill: var(--link);
      }
    </style>
  </head>
  <body>
    <nav class="sheep-nav">
      <a class="link nav-home" href="../">&leftarrow; /all/</a>
      <a class="link" href="./sheep.html">sheep.js</a>
      <a class="link" href="./sheep2.html">sheep2.js</a>
      <a class="link" href="./sheep3.html">sheep3.js</a>
    </nav>
    <main class="main">
      <h1>little sheep hall of fame</h1>
      <p>
        The little sheep watermark (sometimes referred to as
        <em lang="eo">l' ≈ùafeto</em>) appears on the bottom right corner of most
        pages (most exceptions are in
        <a class="link" href="/hello-world/">hello-world</a> and
        <a class="link" href="/thingkingland/sitemap.html">thingkingland</a>).
        Not only does it provide consistent branding across my inconsistent
        website and offer quick access and discoverability of my home page to
        random visitors, but it's my main entry point for anything I want to
        quickly add to (almost) every page on this website.
      </p>
      <div class="cols">
        <figure>
          <img
            src="/SHEEP.svg"
            alt="My sheep logo, Material cool grey on white. Unlike the current logo, it has small, white circular eyes. The horns are slightly wider."
          />
          <figcaption>
            <p>
              The original logo used for the watermark, designed in Google
              Drawings. It has been described by some people as "scary" due to
              its eyes.
            </p>
          </figcaption>
        </figure>
        <figure>
          <img
            src="/SHEPS.svg"
            alt="My current sheep logo, a desaturated teal abstract sheep head shape with horns and wool on the head represented by negative space."
          />
          <figcaption>
            <p>
              The current logo is a simple shape, used in the current site
              favicon. The outline version is used in the current watermark and
              in the opening animation of my home page, which I believe sets a
              good first impression.
            </p>
          </figcaption>
        </figure>
      </div>

      <p>Here is a distribution of little sheep versions across my website.</p>
      <p>
        <svg
          viewBox="-100 -100 200 200"
          xmlns="http://www.w3.org/2000/svg"
          id="pie"
        ></svg>
      </p>
    </main>

    <script type="module">
      import { on } from '/reform/v1/index.js'

      const SVG_NS = 'http://www.w3.org/2000/svg'
      const RADIUS = 100
      const TAU = 2 * Math.PI
      const ANGLE_OFFSET = TAU / 3

      const bySheep = Array.from(
        Map.groupBy(
          await fetch('../title-desc.json').then(r => r.json()),
          ({ sheep }) => sheep
        ),
        ([sheep, sites]) => ({ sheep, count: sites.length })
      ).sort((a, b) => (a.sheep ?? 0) - (b.sheep ?? 0))
      const total = bySheep.reduce((cum, curr) => cum + curr.count, 0)

      on('pie', svg => {
        let cum = 0
        for (const [i, { sheep, count }] of bySheep.entries()) {
          let link
          if (sheep) {
            link = document.createElementNS(SVG_NS, 'a')
            link.setAttributeNS(
              null,
              'href',
              `./sheep${sheep === 1 ? '' : sheep}.html`
            )
          }

          const fragment = document.createDocumentFragment()

          const path = document.createElementNS(SVG_NS, 'path')
          path.setAttributeNS(
            null,
            'd',
            `M 0 0 L ${Math.cos(TAU * (cum / total) + ANGLE_OFFSET) * RADIUS} ${
              Math.sin(TAU * (cum / total) + ANGLE_OFFSET) * RADIUS
            } A ${RADIUS} ${RADIUS} 0 0 1 ${
              Math.cos(TAU * ((cum + count) / total) + ANGLE_OFFSET) * RADIUS
            } ${
              Math.sin(TAU * ((cum + count) / total) + ANGLE_OFFSET) * RADIUS
            }`
          )
          path.setAttributeNS(
            null,
            'fill',
            `color-mix(in srgb, var(--link) ${i * 10 + 5}%, transparent)`
          )
          fragment.append(path)

          const label = document.createElementNS(SVG_NS, 'text')
          label.textContent = `${
            sheep ? `sheep${sheep === 1 ? '' : sheep}.js` : 'No watermark'
          } (${count})`
          label.setAttributeNS(
            null,
            'x',
            Math.cos(TAU * ((cum + count / 2) / total) + ANGLE_OFFSET) *
              (RADIUS / 2)
          )
          label.setAttributeNS(
            null,
            'y',
            Math.sin(TAU * ((cum + count / 2) / total) + ANGLE_OFFSET) *
              (RADIUS / 2)
          )
          fragment.append(label)

          if (link) {
            link.append(fragment)
            svg.append(link)
          } else {
            svg.append(fragment)
          }

          cum += count
        }
      })
    </script>
  </body>
</html>
